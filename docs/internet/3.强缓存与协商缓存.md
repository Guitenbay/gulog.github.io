HTTP 缓存是一种将资源（例如图片、JavaScript 文件、CSS 文件等）存储在客户端浏览器或代理服务器上的技术。当客户端向服务器发送请求时，服务器会检查缓存中是否已经存在所请求的资源，如果存在，则返回缓存中的资源，从而减少网络流量和提高页面加载速度。

HTTP 缓存机制分为两种类型：协商缓存和强缓存。

## 协商缓存

协商缓存是指当客户端请求一个资源时，服务器会先根据一些特定的规则验证该资源是否可被缓存。如果资源可以被缓存，则服务器会返回一个包含缓存信息的响应，并且客户端会将该响应保存在本地缓存中。当客户端再次请求该资源时，客户端会将缓存信息作为请求头发送给服务器，服务器会根据这些信息判断是否需要返回新的资源。如果服务器返回的响应表示资源未被修改，则客户端将从本地缓存中获取该资源；否则，服务器会返回新的资源，并将新的缓存信息发送给客户端。

协商缓存机制可以通过设置 HTTP 响应头实现，常见的 HTTP 响应头字段有：Last-Modified、ETag、If-Modified-Since 和 If-None-Match。


## 强缓存

强缓存是指当客户端请求一个资源时，浏览器首先检查本地是否有该资源的缓存副本，并根据缓存策略决定是否使用缓存。如果该资源存在强缓存中，则浏览器直接从缓存中获取该资源，不会向服务器发送请求。

强缓存机制可以通过设置 HTTP 响应头实现，常见的 HTTP 响应头字段有：Expires 和 Cache-Control。

## 何时使用强缓存？

强缓存可以在不与服务器进行交互的情况下，直接从本地缓存中获取资源，从而显著提高页面加载速度，减少对服务器的请求。

使用强缓存的条件是：

1. 对于不会经常更新的资源，比如图片、字体、CSS 文件等，可以使用强缓存。这些资源的更新频率比较低，通常不会因为强缓存而导致页面更新不及时的问题。
2. 对于不需要立即获取最新资源的情况，可以使用强缓存。比如一些静态资源，用户需要在未来的某个时间点访问，这时使用强缓存可以显著提高页面加载速度。

在使用强缓存时，需要设置 HTTP 响应头中的 Expires 或 Cache-Control 字段，以指示浏览器缓存该资源的有效期。需要注意的是，使用过期时间时需要确保服务器与客户端的时间同步，否则可能导致缓存时间失效。

## 响应码的不同

1. 强缓存命中时，服务器会返回 HTTP 状态码 `200（OK）`，表示客户端请求的资源可以直接从缓存中获取，并且无需向服务器发起新的请求。

    当客户端请求的资源未命中强缓存时，服务器会忽略强缓存，并根据其他缓存机制（如协商缓存）返回资源或相应的 HTTP 状态码。

2. 协商缓存命中时，服务器会返回 HTTP 状态码 304（Not Modified），表示客户端缓存的资源仍然有效，可以直接从缓存中获取，并且无需向服务器发起新的请求。

    当客户端请求的资源未命中协商缓存时，服务器会返回资源或相应的 HTTP 状态码。常见的状态码有 200（OK）和 206（Partial Content），分别表示返回完整资源和部分资源。
